# Сервер интеграции товаров для сайта Damax

Это серверное приложение на Python, которое позволяет интегрировать товары с внешнего сайта на сайт Damax. Приложение обеспечивает следующий функционал:

1. API для добавления, обновления и удаления товаров
2. Хранение данных в SQLite базе данных
3. Загрузка и сохранение изображений товаров
4. Интеграция с клиентской частью сайта Damax

## Требования

- Python 3.7 или выше
- Flask
- Flask-CORS
- Requests

## Установка

1. Установите Python 3.7 или выше с [официального сайта](https://www.python.org/downloads/).

2. Установите необходимые зависимости:

```bash
pip install flask flask-cors requests
```

3. Скопируйте файлы проекта в выбранную директорию:
   - `server.py` - основной файл сервера
   - `products-api.js` - клиентская часть для интеграции с сайтом
   - `admin-panel.html` - административная панель для управления товарами

## Запуск сервера

1. Откройте терминал и перейдите в директорию с проектом:

```bash
cd путь/к/проекту
```

2. Запустите сервер:

```bash
python server.py
```

3. Сервер будет запущен на `http://localhost:5000`.

## Структура проекта

- `server.py` - основной файл сервера с API
- `products.db` - SQLite база данных (создается автоматически)
- `uploads/` - директория для загруженных изображений (создается автоматически)
- `products-api.js` - клиентская JavaScript библиотека для работы с API
- `admin-panel.html` - административная панель для управления товарами

## API Endpoints

### Получение списка товаров

```
GET /api/products
```

Параметры запроса:
- `category` (опционально) - фильтр по категории товаров

Пример ответа:
```json
{
  "success": true,
  "products": [
    {
      "id": 1,
      "title": "Наушники Wireless",
      "description": "Беспроводные наушники с шумоподавлением",
      "price": 4990,
      "image_url": "uploads/headphones.jpg",
      "category": "electronics"
    }
  ]
}
```

### Получение информации о товаре

```
GET /api/products/<product_id>
```

Пример ответа:
```json
{
  "success": true,
  "product": {
    "id": 1,
    "title": "Наушники Wireless",
    "description": "Беспроводные наушники с шумоподавлением",
    "price": 4990,
    "image_url": "uploads/headphones.jpg",
    "category": "electronics"
  }
}
```

### Добавление товара

```
POST /api/products
```

Тело запроса:
```json
{
  "title": "Наушники Wireless",
  "description": "Беспроводные наушники с шумоподавлением",
  "price": 4990,
  "image_url": "https://example.com/images/headphones.jpg",
  "category": "electronics"
}
```

Обязательные поля:
- `title` - название товара
- `price` - цена товара

Пример ответа:
```json
{
  "success": true,
  "product_id": 1,
  "message": "Товар успешно добавлен"
}
```

### Обновление товара

```
PUT /api/products/<product_id>
```

Тело запроса:
```json
{
  "title": "Обновленное название",
  "price": 5990
}
```

Пример ответа:
```json
{
  "success": true,
  "message": "Товар успешно обновлен"
}
```

### Удаление товара

```
DELETE /api/products/<product_id>
```

Пример ответа:
```json
{
  "success": true,
  "message": "Товар успешно удален"
}
```

## Интеграция с сайтом

Чтобы интегрировать сервер с сайтом Damax:

1. Скопируйте файл `products-api.js` в корневую директорию сайта.
2. Добавьте следующий код в `desktop.html` перед закрывающим тегом `</body>`:

```html
<!-- Подключение API для работы с товарами -->
<script src="products-api.js"></script>
<script>
  // Инициализация API товаров после загрузки DOM
  document.addEventListener('DOMContentLoaded', function() {
    if (window.productsApi) {
      window.productsApi.initProductsApi();
    }
  });
</script>
```

3. Убедитесь, что в файле `products-api.js` указан правильный URL сервера (по умолчанию `http://localhost:5000`).

## Административная панель

Для управления товарами через административную панель:

1. Откройте файл `admin-panel.html` в браузере.
2. Убедитесь, что сервер запущен и доступен по URL, указанному в переменной `API_BASE_URL` (по умолчанию `http://localhost:5000`).
3. Используйте интерфейс для добавления, редактирования и удаления товаров.

## Поддержка и обратная связь

По всем вопросам и предложениям обращайтесь к администратору сайта. 